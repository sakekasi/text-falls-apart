{"version":3,"sources":["webpack:///./src/index.js","webpack:///./src/markovChain.js","webpack:///./src/utils.js","webpack:///./src/components/paragraph/index.js","webpack:///./src/stylesheets/components/paragraph.scss","webpack:///./src/stylesheets/base.scss"],"names":[],"mappings":"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","file":"markov.bundle.js","sourcesContent":["require(\"stylesheets/base.scss\");\n\nimport MarkovChain from \"./markovChain.js\";\nimport Paragraph from \"./components/paragraph\";\n\ndocument.addEventListener('DOMContentLoaded', function(){\n  let initialText = document.querySelector('#initialText').textContent;\n  let bookText = document.querySelector('#bookText').textContent;\n\n  let markovChain = new MarkovChain(bookText);\n\n  // initialText = markovChain.generate(1000);\n  let paragraph = new Paragraph(document.body, initialText);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import { choose } from \"./utils.js\";\n\nexport default class MarkovChain{\n  constructor(text, prefixLength = 2){\n    this.prefixLength = prefixLength;\n    this.text = text;\n  }\n\n  _slurp(){\n    let words = [].concat.apply([], this.text.split('\\n')\n                                                        .map(line=> line.split(' ')));\n    let prefix = words.slice(0, this.prefixLength);\n    words = words.slice(this.prefixLength);\n\n    words.forEach(word=> {\n      let key = prefix.join(' ');\n      if(this._data.has(key)){\n        this._data.get(key).push(word);\n      } else {\n        this._data.set(key, [word]);\n      }\n\n      prefix.push(word);\n      prefix.shift();\n    });\n\n    this._serialize();\n  }\n\n  _serialize(){\n    localStorage.setItem('markovChainMap', JSON.stringify([...this._data]));\n  }\n\n  _deserialize(){\n    this._data = new Map(JSON.parse(localStorage.getItem('markovChainMap')));\n  }\n\n  get data(){\n    if(!this._data){\n      if(localStorage.getItem('markovChainMap')){\n        this._deserialize();\n      } else {\n        this._data = new Map();\n        this._slurp();\n        this._serialize();\n      }\n    }\n\n    return this._data;\n  }\n\n  next(prefix){\n    if(!prefix || !this.data.has(prefix)){\n      throw 'passed null prefix to next';\n    }\n\n    return choose(this.data.get(prefix));\n  }\n\n  generate(length){\n    let prefix = choose(Array.from(this.data.keys()).filter(key=> key.charAt(0).toUpperCase() === key.charAt(0))).split(' ');\n    let text = prefix.slice();\n\n    while(text.length < length){\n      let nextWord = this.next(prefix.join(' '));\n\n      text.push(nextWord);\n\n      prefix.push(nextWord);\n      prefix.shift();\n    }\n\n    return text.join(' ');\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/markovChain.js\n **/","export function _(name, attrs, ...children){\n  let domNode = document.createElement(name);\n  Object.keys(attrs).forEach(attr=> domNode.setAttribute(attr, attrs[attr]));\n  children.forEach(child=> domNode.appendChild(child));\n\n  return domNode;\n}\n\nexport function t(text){\n  return document.createTextNode(text);\n}\n\nexport function choose(array){\n  return array[Math.floor(Math.random() * array.length)]\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/","require(\"stylesheets/components/paragraph.scss\");\n\nimport { _, t } from \"../../utils.js\";\n\nexport default class LineBrokenParagraph {\n  constructor(parentNode, text){\n    this.text = text;\n\n    let words = this.text.split(' ')\n                         .map(word=> _('word', {}, t(word)));\n    let children = [].concat.apply([], words.map((wordNode, i, words)=> (i===words.length-1)? [wordNode]: [wordNode, t(' ')]));\n\n    this.domNode =  _('p', {class: 'animatedParagraph'}, ...children);//t(this.text));\n    this.parentNode = parentNode;\n\n    this.parentNode.appendChild(this.domNode);\n\n    let lines = [[]];\n    words.forEach((wordNode, i)=>{\n      let line = lines.slice(-1)[0];\n      let previous = words[i-1];\n      if(previous && (previous.getBoundingClientRect().top !== wordNode.getBoundingClientRect().top)){\n        console.log(`new line at ${wordNode.textContent}`);\n        lines.push([]);\n        line = lines.slice(-1)[0];\n      }\n\n      line.push(wordNode);\n    });\n\n    while(this.domNode.firstChild){;\n      this.domNode.removeChild(this.domNode.firstChild);\n    }\n\n    lines = lines.map(lineNodes=> {\n      let children = [].concat.apply([], lineNodes.map((wordNode, i, line)=> (i===line.length-1)? [wordNode]: [wordNode, t(' ')]));\n      return _('line', {}, ...children);\n    });\n\n    lines.forEach(line=> this.domNode.appendChild(line));\n    // this.domNode.style.maxWidth = 'none';\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/paragraph/index.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/stylesheets/components/paragraph.scss\n ** module id = 4\n ** module chunks = 0\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/stylesheets/base.scss\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":""}